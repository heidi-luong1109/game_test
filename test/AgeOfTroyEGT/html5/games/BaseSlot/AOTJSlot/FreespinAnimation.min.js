var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),com;!function(a){!function(b){!function(b){var c=a.egt.library.loading.Loader,d=a.egt.baseslot.models.Resources,e=function(a){function b(){var b=a.call(this)||this,e=c.getLoader(d.FREESPIN_ANIMATION_LAYOUT_LOADER),f=e.getData().mainContainer;return b._elementsWithID=e.getData().elementsWithID,b._layoutRoot=f,b._elementsWithID.door.visible=!1,b._elementsWithID.doorSide.visible=!1,b._elementsWithID.introText.visible=!1,b._elementsWithID.retrigerText.visible=!1,b._elementsWithID.outroContainer.visible=!1,b._elementsWithID.pressStart_1.visible=!1,b._elementsWithID.pressStart_2.visible=!1,b.addChild(f),b}return __extends(b,a),b.prototype.isDisplayingCredits=function(a){},b.prototype.dispose=function(){},b}(PIXI.Container);b.AnimationLayout=e}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.baseslot.views.freespin.FreespinAnimation,d=a.egt.library.loading.Loader,e=a.egt.baseslot.models.Resources,f=a.egt.library.Utils,g=a.egt.baseslot.views.VideoPlayer,h=function(a){function b(b,c){var d=a.call(this)||this;return d._eventEmitter=b,d._mainModel=c,d._doorTexture=d._elementsWithID.door.texture,d._doorSideTexture=d._elementsWithID.doorSide.texture,d._doorAnimation=new DOOR_FX(d,d._doorTexture,d._doorSideTexture,16,4,0,643),d._shadow=new PIXI.Graphics,d._shadow.beginFill(0),d._shadow.drawRect(0,0,PIXI.renderer.width,PIXI.renderer.height),d._shadow.endFill(),d._shadow.alpha=.1,d.addChildAt(d._shadow,0),d._doorAnimation.CurrentAngle=-55,d}return __extends(b,a),b.prototype.isDisplayingCredits=function(a){},b.prototype.dispose=function(){a.prototype.dispose.call(this),this._doorTween.kill(),this._doorTween=null,this._shadowTween.kill(),this._shadowTween=null},b.prototype.openDoor=function(a){void 0===a&&(a=null),this._isOpeningAnimation=!0,this._shadowTween=TweenMax.to(this._shadow,1,{alpha:0}),this.startAnimatingDoor(-55,a)},b.prototype.closeDoor=function(a){void 0===a&&(a=null),this._isOpeningAnimation=!1,this.startAnimatingDoor(0,a),this._shadowTween=TweenMax.to(this._shadow,1,{alpha:.6})},b.prototype.startAnimatingDoor=function(a,b){void 0===b&&(b=null),this._doorAnimationCompleteCallback=b,this._doorTween=TweenMax.to(this._doorAnimation,1.5,{CurrentAngle:a,onComplete:this.onDoorAnimationComplete,ease:Linear.easeNone,onCompleteScope:this})},b.prototype.onDoorAnimationComplete=function(){this._doorAnimationCompleteCallback&&(this._isOpeningAnimation?this._doorAnimationCompleteCallback():this.startDust())},b.prototype.onDustComplete=function(){this.removeChild(this._dust),this._eventEmitter.emit(c.REFRESH_SCREEN),this._doorAnimationCompleteCallback()},b.prototype.startDust=function(){this._mainModel.soundManager.play("doorHitSound");for(var a=d.getLoader(e.FREESPIN_ANIMATION_LAYOUT_LOADER),b={length:10,fps:10},c=[],h=0;h<b.length;h++)c[h]=a.getTexture("dust_"+f.convertToSequenceString(h)+".png");this._dustVideo=new g(c,b),this._dust=new PIXI.Sprite,this._dust.x=(PIXI.renderer.width-c[0].width)/2,this.addChild(this._dust),this._dustVideo.addInstance(this._dust),this._dustVideo.addEventListener(g.VIDEO_COMPLETE,this.onDustComplete,this),this._dustVideo.play()},b}(b.AnimationLayout);b.BaseAnimation=h}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var DOOR_WIDTH=7,DOOR_HEIGHT=8,DOOR_Z=5.7,DOOR_THICKNESS=.5,FIELD_OF_VIEW_Y=70,SLICED_TEXTURED_ROTATING_PLANE=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){this.numSlices=Math.floor(b.width/c),this.widthSlice=c,this.sprites=[];for(var n=m,o=0;o<this.numSlices;++o){var p=m+(o+1)*b.width/this.numSlices,q=new PIXI.Texture(b.baseTexture,new PIXI.Rectangle(n,0,p-n,b.height));this.sprites.push(new PIXI.Sprite(q)),a.addChildAt(this.sprites[o],0),n=p}this.x1=d,this.z1=f,this.x2=g,this.z2=i,this.y1=e,this.y2=h,this.xAxis=j,this.zAxis=k,this.angle_deg=0,this.fov_y=l}return a.prototype.rotate_point_around_Y=function(a,b){return{x:this.xAxis+(a-this.xAxis)*this.cos_angle-(b-this.zAxis)*this.sin_angle,z:this.zAxis+(a-this.xAxis)*this.sin_angle+(b-this.zAxis)*this.cos_angle}},a.prototype.project_point=function(a,b,c,d,e){var f=Math.tan(this.fov_y/2*Math.PI/180);return{x:(a/c*.5/(f*d/e)+.5)*d,y:(b/c*.5/f+.5)*e}},a.prototype.draw=function(a,b){var c=(this.x1,this.z1,this.x2-this.x1),d=this.z2-this.z1,e=a.width,f=a.height;this.cos_angle=Math.cos(b*Math.PI/180),this.sin_angle=Math.sin(b*Math.PI/180);for(var g,h,i=-1;i<this.numSlices;++i){var j=this.x1+(i+1)*c/this.numSlices,k=this.z1+(i+1)*d/this.numSlices,l=this.rotate_point_around_Y(j,k),m=this.project_point(l.x,this.y1,l.z,e,f),n=this.project_point(l.x,this.y2,l.z,e,f);if(i>=0){var o=this.sprites[i];o.x=g.x,o.scale.x=(m.x-g.x)/this.widthSlice,o.y=(g.y+m.y)/2,o.height=(n.y-m.y+h.y-g.y)/2}g=m,h=n}},a}(),DOOR_FX=function(){function a(a,b,c,d,e,f,g){this.currentAngle=0,this.faceLeft=new SLICED_TEXTURED_ROTATING_PLANE(a,b,d,-DOOR_WIDTH,-DOOR_HEIGHT/2,DOOR_Z,0,DOOR_HEIGHT/2,DOOR_Z,-DOOR_WIDTH,DOOR_Z+DOOR_THICKNESS,FIELD_OF_VIEW_Y,f),this.sideLeft=new SLICED_TEXTURED_ROTATING_PLANE(a,c,e,0,-DOOR_HEIGHT/2,DOOR_Z,0,DOOR_HEIGHT/2,DOOR_Z+DOOR_THICKNESS,-DOOR_WIDTH,DOOR_Z+DOOR_THICKNESS,FIELD_OF_VIEW_Y,g),this.faceRight=new SLICED_TEXTURED_ROTATING_PLANE(a,b,d,DOOR_WIDTH,-DOOR_HEIGHT/2,DOOR_Z,0,DOOR_HEIGHT/2,DOOR_Z,DOOR_WIDTH,DOOR_Z+DOOR_THICKNESS,FIELD_OF_VIEW_Y,f),this.sideRight=new SLICED_TEXTURED_ROTATING_PLANE(a,c,e,0,-DOOR_HEIGHT/2,DOOR_Z,0,DOOR_HEIGHT/2,DOOR_Z+DOOR_THICKNESS,DOOR_WIDTH,DOOR_Z+DOOR_THICKNESS,FIELD_OF_VIEW_Y,g)}return Object.defineProperty(a.prototype,"CurrentAngle",{get:function(){return this.currentAngle},set:function(a){this.currentAngle=a,this.draw({width:PIXI.renderer.width,height:PIXI.renderer.height},this.currentAngle)},enumerable:!0,configurable:!0}),a.prototype.draw=function(a,b){this.faceLeft.draw(a,b),this.sideLeft.draw(a,b),this.faceRight.draw(a,-b),this.sideRight.draw(a,-b)},a}(),com;!function(a){!function(b){!function(b){var c=a.egt.baseslot.views.freespin.FreespinAnimation,d=function(a){function b(b,c){var d=a.call(this,b,c)||this;return c.soundManager.play("introSound"),console.log("closing door"),d.closeDoor(d.onClosedDoorsComplete),d}return __extends(b,a),b.prototype.onClosedDoorsComplete=function(){console.log("closing intro door complete"),this._elementsWithID.introText.visible=!0,TweenMax.delayedCall(7.2,function(){this._elementsWithID.introText.visible=!1,this.openDoor(this.onDoorsOpened)},null,this)},b.prototype.onDoorsOpened=function(){this._eventEmitter.emit(c.INTRO_ENDED)},b}(b.BaseAnimation);b.IntroAnimation=d}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.library.sound.SoundManager,d=function(a){function b(d){var e=a.call(this)||this;return e._soundManager=d.soundManager,e._elementsWithID.pressStart_1.visible=!0,e._elementsWithID.pressStart_2.visible=!0,e._pressStartText=e._elementsWithID.pressStart_1,e._pressStartTween=TweenMax.delayedCall(b.START_VISIBLE_TIME,e.startTextBlink,null,e),e._pressStartSound=d.soundManager.play("pressStartSound",!0),e._soundManager.addEventListener(c.SOUND_LOADED,e.onSoundsLoaded,e),e}return __extends(b,a),b.prototype.dispose=function(){this._soundManager.removeEventListener(c.SOUND_LOADED,this.onSoundsLoaded,this),this._elementsWithID.pressStart_1.visible=!1,this._elementsWithID.pressStart_2.visible=!1,this._pressStartTween&&this._pressStartTween.kill(),this._pressStartSound&&this._pressStartSound.stop(),a.prototype.dispose.call(this)},b.prototype.startTextBlink=function(){this._pressStartText.visible=!this._pressStartText.visible;var a=this._pressStartText.visible?b.START_VISIBLE_TIME:b.START_HIDDEN_TIME;this._pressStartTween=TweenMax.delayedCall(a,this.startTextBlink,null,this)},b.prototype.onSoundsLoaded=function(a){"freespinSounds"==a.data.soundId&&null==this._pressStartSound&&(this._pressStartSound=this._soundManager.play("pressStartSound",!0))},b.START_VISIBLE_TIME=.9,b.START_HIDDEN_TIME=.4,b}(b.AnimationLayout);b.StartAnimation=d}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.baseslot.views.freespin.FreespinAnimation,d=function(a){function b(b,c){var d=a.call(this,b,c)||this;return c.soundManager.play("introSound"),d.closeDoor(d.onClosedDoorsComplete),d}return __extends(b,a),b.prototype.onClosedDoorsComplete=function(){console.log("closing intro door complete"),this._elementsWithID.retrigerText.visible=!0,TweenMax.delayedCall(7.2,function(){this._elementsWithID.retrigerText.visible=!1,this.openDoor(this.onDoorsOpened)},null,this)},b.prototype.onDoorsOpened=function(){this._eventEmitter.emit(c.RETRIGGER_ENDED)},b}(b.BaseAnimation);b.RetriggerAnimation=d}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.baseslot.views.freespin.FreespinAnimation,d=a.egt.library.widgets.BitmapMoneyText,e=a.egt.library.loading.Loader,f=function(a){function b(b,c){var f=a.call(this,b,c)||this,g=e.getLoader("gameImages"),h=f._mainModel.gameSettings,i=h.diamondPlay,j=i?g.getTexture("diamond.png"):null,k=f._elementsWithID.winAmount,l=f._elementsWithID.winAmountCurrency;return k.visible=!1,l.visible=!1,f._bitMapMoney=new d({currency:h.currencyISO,denomination:f._mainModel.denomination,align:"center",fontFamily:k.font.name,moneyFontSize:k.font.size,centerAlignOnlyMoney:!1,isShowingCredits:f._mainModel.isDisplayingCredits,shouldFitToBounds:!0,debug:!1,spaceBetweenMoneyAndDiamond:20,diamond:j,diamondPlay:i,diamondScaleCoef:i?.7:0,hideCents:h.currencyHideCents,bounds:{width:1200,height:k.height}}),f.addChild(f._bitMapMoney),f._bitMapMoney.money=c.betResponse.winAmount,f._bitMapMoney.visible=!1,f._bitMapMoney.position.y=k.y,f._bitMapMoney.position.x=(PIXI.renderer.width-f._bitMapMoney.width)/2,c.soundManager.play("outroSound"),f.closeDoor(f.onClosedDoorsComplete),f}return __extends(b,a),b.prototype.onClosedDoorsComplete=function(){console.log("closing intro door complete"),this._elementsWithID.outroContainer.visible=!0,this._bitMapMoney.visible=!0,this._elementsWithID.winAmount.visible=!1,this._elementsWithID.winAmountCurrency.visible=!1,TweenMax.delayedCall(7.2,function(){this._elementsWithID.outroContainer.visible=!1,this._bitMapMoney.visible=!1,this.openDoor(this.onDoorsOpened)},null,this)},b.prototype.onDoorsOpened=function(){this._eventEmitter.emit(c.OUTRO_ENDED)},b}(b.BaseAnimation);b.OutroAnimation=f}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.baseslot.views.freespin.FreespinAnimation,d=a.egt.library.Device,e=function(a){function e(b){return a.call(this,b)||this}return __extends(e,a),Object.defineProperty(e.prototype,"isDisplayingCredits",{set:function(a){this._currentAnimation.isDisplayingCredits(a)},enumerable:!0,configurable:!0}),e.prototype.playStart=function(){this.destroyAnimations(),this._currentAnimation=new b.StartAnimation(this._mainModel),this._currentAnimation.on(d.resolveEvent("click"),this.onStartClick,this),this._currentAnimation.interactive=!0,this._currentAnimation.buttonMode=!0,this.addChild(this._currentAnimation)},e.prototype.playIntro=function(){this.destroyAnimations(),this._currentAnimation=new b.IntroAnimation(this,this._mainModel),this.addChild(this._currentAnimation)},e.prototype.playRetrigger=function(){this.destroyAnimations(),this._currentAnimation=new b.RetriggerAnimation(this,this._mainModel),this.addChild(this._currentAnimation)},e.prototype.playOutro=function(){this.destroyAnimations(),this._currentAnimation=new b.OutroAnimation(this,this._mainModel),this.addChild(this._currentAnimation)},e.prototype.dispose=function(){this.destroyAnimations()},e.prototype.destroyAnimations=function(){this._currentAnimation&&(this.removeChild(this._currentAnimation),this._currentAnimation.dispose(),this._currentAnimation.off(d.resolveEvent("click"),this.onStartClick,this),this._currentAnimation=null)},e.prototype.onStartClick=function(){this.emit(c.START_CLICKED)},e}(c);b.Main=e}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));